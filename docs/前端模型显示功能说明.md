# 前端模型显示功能说明

## 功能概述

在前端角色卡上新增了AI模型显示功能，让用户可以清楚地看到每个角色当前使用的AI模型，方便观察和分析不同模型在狼人杀游戏中的表现差异。

## 实现细节

### 1. 角色卡布局更新

每个角色卡现在包含以下信息：
- **角色姓名**：显眼的角色名称
- **角色身份**：狼人、预言家、女巫、平民等（带有颜色标识）
- **基础信息**：性别、性格、存活状态
- **🆕 AI模型信息**：模型名称和所属平台（新增功能）

### 2. 模型信息展示

#### 显示内容
- **模型名称**：如"DeepSeek R1"、"通义千问Plus"、"豆包Seed 1.6"等
- **所属平台**：DeepSeek、阿里百炼、火山方舟

#### 视觉设计
- **渐变背景**：每个平台有独特的配色方案
- **边框标识**：左侧彩色边框区分不同平台
- **徽章样式**：平台名称以圆角徽章形式显示

### 3. 平台配色方案

#### DeepSeek平台（蓝紫色主题）
- **背景**：浅蓝到淡紫的渐变
- **边框**：蓝色（#2196f3）
- **文字**：深蓝色（#1976d2）

#### 阿里百炼平台（橙色主题）
- **背景**：浅橙到粉色的渐变
- **边框**：橙色（#ff9800）
- **文字**：深橙色（#f57c00）

#### 火山方舟平台（绿色主题）
- **背景**：浅绿色渐变
- **边框**：绿色（#4caf50）
- **文字**：深绿色（#388e3c）

## 技术实现

### 前端代码更新

#### 1. JavaScript函数新增
```javascript
// 获取模型显示名称
function getModelDisplayName(model) {
    const modelMap = {
        'deepseek-r1': 'DeepSeek R1',
        'deepseek-v3': 'DeepSeek V3',
        'deepseek-chat': 'DeepSeek Chat',
        'qwen-plus': '通义千问Plus',
        'qwen-turbo': '通义千问Turbo',
        'qwen-turbo-latest': '通义千问Turbo',
        'Doubao-Seed-1.6': '豆包Seed 1.6',
        'Doubao-Seed-1.6-thinking': '豆包Thinking'
    };
    return modelMap[model] || model;
}

// 获取模型平台
function getModelPlatform(model) {
    if (model && model.startsWith('deepseek')) {
        return 'DeepSeek';
    } else if (model && model.startsWith('qwen')) {
        return '阿里百炼';
    } else if (model && (model.startsWith('Doubao') || model.startsWith('doubao'))) {
        return '火山方舟';
    }
    return '未知平台';
}
```

#### 2. 角色卡渲染更新
```javascript
// 添加AI模型信息
const modelInfo = document.createElement('div');
modelInfo.className = 'character-model';
const modelDisplayName = getModelDisplayName(character.model);
const modelPlatform = getModelPlatform(character.model);
modelInfo.setAttribute('data-platform', modelPlatform);
modelInfo.innerHTML = `
    <div class="model-name">${modelDisplayName}</div>
    <div class="model-platform">${modelPlatform}</div>
`;
```

#### 3. CSS样式定义
```css
/* 角色模型信息样式 */
.character-model {
    margin-top: 8px;
    padding: 8px;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 4px;
    border-left: 3px solid #6c757d;
}

/* 不同AI平台的主题色 */
.character-model[data-platform="DeepSeek"] {
    background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
    border-left-color: #2196f3;
}
```

### 后端数据支持

角色的`to_dict()`方法已包含模型信息：
```python
def to_dict(self):
    return {
        "id": self.id,
        "name": self.name,
        "gender": self.gender,
        "style": self.style,
        "model": self.model,  # 模型信息
        "role": self.role,
        "alive": self.alive
    }
```

## 当前角色模型分配

| 角色 | 性格 | AI模型 | 平台 | 颜色主题 |
|------|------|--------|------|----------|
| 张三 | 激进 | DeepSeek R1 | DeepSeek | 蓝紫色 |
| 李四 | 保守 | 通义千问Plus | 阿里百炼 | 橙色 |
| 王五 | 理性 | 豆包Thinking | 火山方舟 | 绿色 |
| 赵六 | 情绪化 | DeepSeek V3 | DeepSeek | 蓝紫色 |
| 钱七 | 冷静 | 通义千问Turbo | 阿里百炼 | 橙色 |
| 孙八 | 多疑 | 豆包Seed 1.6 | 火山方舟 | 绿色 |
| 周九 | 沉默 | DeepSeek Chat | DeepSeek | 蓝紫色 |
| 吴十 | 活跃 | 通义千问Plus | 阿里百炼 | 橙色 |

## 使用效果

### 观察价值
1. **模型表现对比**：可以直观对比不同AI模型的策略差异
2. **平台特色分析**：观察不同平台模型的行为特点
3. **性格模型结合**：分析性格设定与AI模型的匹配效果

### 用户体验
1. **信息完整性**：角色信息一目了然，包含所有关键要素
2. **视觉层次感**：通过颜色和布局区分不同信息类型
3. **实时更新**：模型信息随角色数据实时显示和更新

### 研究辅助
1. **策略分析**：帮助研究员观察AI模型的不同策略倾向
2. **性能评估**：便于评估不同模型在复杂社交推理中的表现
3. **行为记录**：结合记忆系统，可以追踪模型的决策过程

## 后续扩展建议

1. **模型性能指标**：可以添加胜率、生存轮数等统计信息
2. **实时状态显示**：显示当前模型的API调用状态（成功/失败）
3. **模型切换功能**：支持游戏过程中动态切换角色使用的模型
4. **详细模型信息**：点击模型卡片显示更多技术细节和配置参数

通过这个功能，用户现在可以更好地理解和观察不同AI模型在狼人杀游戏中的表现，为AI能力研究和游戏策略分析提供了重要的可视化支持。
