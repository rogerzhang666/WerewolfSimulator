# 狼人杀模拟器

## 项目介绍
这是一个基于AI模型驱动的狼人杀游戏模拟器，可以模拟8人局的狼人杀游戏过程。在这个模拟器中，所有角色都由AI模型驱动，用户作为上帝视角观察游戏进程。

## 游戏设置
- **游戏人数**：8人局
- **角色分配**：2狼人 + 2神民 + 4平民
- **游戏模式**：全AI模拟，用户观察

### 角色设置
游戏中将有8个AI驱动的角色，每个角色具有以下属性：
- 姓名
- 性别
- 性格风格（如激进、保守、理性、情绪化等）
- 驱动模型（可配置使用不同的AI模型）

### 可能的神民角色
- 预言家：每晚可查验一名玩家的身份
- 女巫：拥有一瓶解药和一瓶毒药
- 猎人：被淘汰时可以带走一名玩家
- 守卫：每晚可以保护一名玩家不被狼人杀害

## 游戏流程
1. 配置角色信息
2. 随机分配角色身份
3. 开始游戏循环：
   - 天黑阶段（狼人行动、神民技能使用）
   - 天亮阶段（公布夜晚结果）
   - 讨论阶段（所有存活角色发言）
   - 投票阶段（投票处决一名玩家）
4. 重复游戏循环直到某方胜利

## 胜利条件
- 狼人阵营：狼人数量大于或等于好人阵营
- 好人阵营：全部狼人出局

## 技术架构
- **前端**：基于HTML/CSS/JS的简单界面，WebSocket实时通信
- **后端**：Python服务器，Flask框架，Socket.IO通信
- **AI模型**：使用deepseek、qwen等大语言模型

## 安装与运行
### 环境要求
- Python >= 3.8
- AI模型API密钥

### 安装步骤
1. 克隆仓库
```bash
git clone https://github.com/rogerzhang666/WerewolfSimulator.git
cd WerewolfSimulator
```

2. 创建并激活虚拟环境
```bash
python -m venv venv
source venv/bin/activate  # 在Windows上使用 venv\Scripts\activate
```

3. 安装依赖
```bash
pip install -r requirements.txt
```

4. 配置环境变量
创建`.env`文件并设置必要的环境变量：
```
DEEPSEEK_API_KEY=your_api_key_here
QWEN_API_KEY=your_api_key_here
PORT=5003
DEBUG=True
```

5. 启动应用
```bash
python run.py
```

6. 访问应用
在浏览器中访问 `http://localhost:5003` 开始游戏

## 优化TODO项目

### 1. 角色决策逻辑优化
- [ ] **修复角色身份与决策不匹配问题**
  - 确保女巫不会毒死预言家等好人阵营角色
  - 狼人在发言和投票时不会暴露自己的身份
  - 好人阵营会优先考虑预言家的查验结果

### 2. 记忆系统增强
- [ ] **完善角色记忆机制**
  - 确保角色能记住并利用预言家的查验结果
  - 角色能够记住其他玩家的可疑行为
  - 实现跨回合的记忆连贯性

### 3. 提示词优化
- [ ] **改进AI提示词设计**
  - 为不同角色设计专门的提示词模板
  - 在提示词中明确指导角色根据身份采取合适行动
  - 添加阵营目标和策略指导

### 4. 发言与投票一致性
- [ ] **确保角色发言与投票行为一致**
  - 实现发言内容与投票决策的逻辑关联
  - 添加投票前的决策分析过程
  - 优化投票理由生成

### 5. 角色策略增强
- [ ] **实现差异化的角色策略**
  - 狼人团队协作和伪装策略
  - 预言家信息共享策略
  - 女巫药水使用策略
  - 平民推理和投票策略

### 6. 游戏平衡性调整
- [ ] **优化游戏平衡**
  - 调整角色能力和决策权重
  - 平衡好人阵营和狼人阵营的胜率
  - 添加更多随机性和不确定性

## 许可证
本项目采用 MIT 许可证 - 详情请参阅 [LICENSE](LICENSE) 文件


