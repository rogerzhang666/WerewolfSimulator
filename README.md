# 狼人杀模拟器 🐺

## 项目介绍

一个AI驱动的狼人杀游戏模拟器，8个AI角色自动进行完整的狼人杀游戏。用户可以观察游戏进程，并通过强大的记忆调试功能深入了解每个AI角色的思考过程和决策逻辑。

## ✨ 主要特性

### 🎮 完整的游戏机制
- **8人标准局**：2狼人 + 1预言家 + 1女巫 + 4平民
- **完整夜晚阶段**：狼人击杀、预言家查验、女巫救人/毒人、守卫保护
- **白天阶段**：自由讨论、民主投票
- **胜负判定**：狼人屠边或好人出局狼人

### 🧠 智能AI系统
- **双重策略系统**：AI角色先进行内心分析，再发表策略性言论
- **多维度记忆**：观察、决策、发言、信念、内心想法五重记忆体系
- **角色差异化**：8种不同性格，每个角色有独特的行为模式
- **严格信息隔离**：确保角色只知道应该知道的信息
- **智能推理**：基于身份特点和记忆信息的策略决策

### 🔧 记忆调试系统
- **记忆查看器**：点击角色发言旁的"记忆"按钮查看AI思考过程
- **内心想法透视**：查看夜晚行动理由、投票理由、发言前分析
- **完整记忆追踪**：观察记录、决策历史、信念变化一目了然

## 🎯 游戏特色

### 双重策略系统
- **内心分析**：AI角色先分析局势、制定策略、评估风险
- **策略发言**：基于内心分析发表符合身份的言论
- **信息隔离**：夜晚行动理由和投票理由都是内心想法，不公开

### 角色配置
- **8个AI角色**：张三、李四、王五、赵六、钱七、孙八、周九、吴十
- **多样性格**：激进、保守、理性、情绪化、冷静、多疑、沉默、活跃
- **身份随机**：每局游戏随机分配狼人、预言家、女巫、平民身份

## 💻 技术架构

### 核心组件
- **前端界面**：HTML/CSS/JS + WebSocket实时通信
- **游戏引擎**：Python Flask + Socket.IO，控制游戏流程
- **记忆系统**：五维记忆存储 + 智能上下文构建
- **AI接口**：支持DeepSeek/Qwen等AI模型

### 核心特性
- **双重策略系统**：内心分析 + 策略发言
- **五维记忆体系**：观察、决策、发言、信念、内心想法
- **严格信息隔离**：角色只知道应该知道的信息
- **智能上下文构建**：基于记忆和身份的动态AI提示

## 🎮 使用指南

### 记忆调试功能
- **查看AI思考**：点击角色发言旁的紫色"记忆"按钮
- **内心想法**：查看夜晚行动理由、投票理由、发言前分析
- **完整记忆**：观察记录、决策历史、信念变化、发言记录
- **实时更新**：记忆状态随游戏进程自动刷新

## 🚀 快速开始

### 1. 安装依赖
```bash
git clone https://github.com/rogerzhang666/WerewolfSimulator.git
cd WerewolfSimulator
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
```

### 2. 配置API密钥
创建 `.env` 文件，添加你的AI模型API密钥：
```env
DEEPSEEK_API_KEY=your_api_key_here
PORT=5003
DEBUG=True
```

### 3. 启动游戏
```bash
python run.py
```

访问 `http://localhost:5003` 开始体验！

### 🎮 游戏操作
- **开始游戏**：点击按钮，AI角色自动开始狼人杀
- **观察游戏**：查看实时游戏日志和角色行为
- **调试记忆**：点击发言旁的"记忆"按钮查看AI思考过程
- **控制游戏**：使用暂停/恢复/重置按钮

## 🎯 已实现功能

### ✅ 最新特性（已完成）
- [x] **双重策略系统**：AI角色先内心分析，再策略发言
- [x] **内心想法机制**：夜晚行动理由、投票理由私密化
- [x] **五维记忆体系**：观察、决策、发言、信念、内心想法
- [x] **完整游戏流程**：8人标准局，所有角色能力正确实现
- [x] **智能记忆调试**：可视化查看AI完整思考过程
- [x] **严格信息隔离**：角色只知道应该知道的信息
- [x] **角色差异化**：8种性格，每个角色独特行为模式

## 🛠 待优化项目
- [ ] **游戏平衡性**：调整AI决策权重，平衡胜负比例
- [ ] **回放功能**：支持游戏录像回放和多局统计
- [ ] **性能优化**：缓存AI响应，减少API调用延迟

## 🤝 贡献与支持

欢迎提交Issue和Pull Request！项目基于MIT许可证开源。

⭐ 如果这个项目对你有帮助，请给个星标支持！
