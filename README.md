# 狼人杀模拟器 🐺

## 项目介绍

这是一个基于AI模型驱动的狼人杀游戏模拟器，可以完整模拟8人局的狼人杀游戏过程。在这个模拟器中，所有角色都由AI模型驱动，用户作为上帝视角观察游戏进程。该项目实现了完整的狼人杀规则、智能的角色行为系统以及强大的记忆调试功能。

## ✨ 主要特性

### 🎮 完整的游戏机制
- **8人标准局**：2狼人 + 1预言家 + 1女巫 + 1守卫 + 3平民
- **完整夜晚阶段**：狼人击杀、预言家查验、女巫救人/毒人、守卫保护
- **白天阶段**：自由讨论、民主投票
- **胜负判定**：狼人屠边或好人出局狼人

### 🧠 智能AI系统
- **角色记忆系统**：每个角色拥有独立的记忆，能够记住观察、决策和信念
- **角色差异化**：不同性格的AI角色，具有不同的行为模式
- **信息隔离**：确保角色只能获取应该知道的信息，平民无法获知夜晚秘密
- **策略决策**：基于角色身份和阵营利益的智能决策

### 🔧 调试功能
- **记忆调试器**：为每个角色发言添加"记忆"按钮，实时查看角色记忆状态
- **多维度记忆展示**：记忆摘要、决策记录、观察记录、发言记录、信念记录
- **实时状态监控**：观察AI角色的思考过程和决策逻辑

## 🎯 游戏流程

### 角色设置
- **张三、李四、王五、赵六、钱七、孙八、周九、吴十**
- **性格特征**：激进、保守、理性、情绪化、冷静、多疑、沉默、活跃
- **AI驱动**：每个角色由独立的AI模型驱动，具有完整的记忆和推理能力

### 游戏阶段
1. **夜晚阶段**
   - 狼人协商击杀目标
   - 预言家查验身份
   - 女巫使用药水
   - 守卫选择保护

2. **白天阶段**
   - 公布死亡结果
   - 角色依次发言
   - 投票处决可疑者

## 💻 技术实现

### 架构设计
```
前端界面 (HTML/CSS/JS + WebSocket)
    ↓
游戏引擎 (Python Flask + Socket.IO)
    ↓
记忆系统 (MemoryManager + Character)
    ↓
AI模型接口 (DeepSeek/Qwen API)
```

### 核心功能
- **信息隔离**：确保平民只知道白天公开信息，神职知道夜晚特殊信息
- **记忆管理**：每个角色维护独立的决策、观察、发言、信念记录
- **策略决策**：基于角色身份、记忆信息和游戏状况的智能决策

## 🚀 快速开始

### 环境要求
- Python 3.8+
- AI模型API密钥

### 安装步骤
1. **克隆项目**
```bash
git clone https://github.com/rogerzhang666/WerewolfSimulator.git
cd WerewolfSimulator
```

2. **环境配置**
```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
```

3. **配置API密钥**
创建 `.env` 文件：
```env
DEEPSEEK_API_KEY=your_api_key_here
PORT=5003
DEBUG=True
```

4. **启动游戏**
```bash
python run.py
```

5. **开始体验**
访问 `http://localhost:5003`

## 🎮 使用指南

### 基本操作
- 点击"开始游戏"启动新局
- 观察角色发言和行动
- 使用"暂停"/"恢复"控制游戏节奏
- 点击"重置游戏"开始新局

### 记忆调试
- 点击角色发言旁的紫色"记忆"按钮
- 在弹出窗口中查看角色的：
  - 记忆摘要
  - 决策记录
  - 观察记录
  - 发言记录
  - 信念记录

## 🎯 已实现功能

### ✅ 核心游戏逻辑
- [x] 完整的8人狼人杀规则实现
- [x] 角色能力正确执行（预言家查验、女巫救毒、守卫保护）
- [x] 胜负条件判定

### ✅ 记忆系统
- [x] 角色独立记忆管理
- [x] 信息隔离机制
- [x] 记忆持久化和查询

### ✅ AI决策系统
- [x] 基于身份的角色行为
- [x] 记忆驱动的决策逻辑
- [x] 阵营目标导向

### ✅ 调试工具
- [x] 实时记忆查看器
- [x] 多维度记忆展示
- [x] 游戏状态监控

## 🛠 待优化项目

### 🔄 游戏平衡性
- [ ] 调整AI决策权重，平衡胜负比例
- [ ] 优化角色协作策略
- [ ] 增强推理链的逻辑性

### 🎨 用户体验
- [ ] 添加游戏回放功能
- [ ] 实现多局统计分析
- [ ] 优化界面交互体验

### ⚡ 性能优化
- [ ] 缓存AI响应，减少API调用
- [ ] 优化内存使用
- [ ] 并发处理优化

## 🤝 贡献指南

欢迎提交Issue和Pull Request！

1. Fork本项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送分支 (`git push origin feature/AmazingFeature`)
5. 创建Pull Request

## 📄 许可证

本项目基于MIT许可证开源 - 查看 [LICENSE](LICENSE) 文件了解详情

## 🏆 致谢

感谢所有为这个项目做出贡献的开发者和测试者！

---
⭐ 如果这个项目对你有帮助，请给个星标支持！


